(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8f2a29a"],{"0ee0":function(e,t,n){"use strict";n("903f")},"1c18":function(e,t,n){},"22cf":function(e,t){!function(e){var t=e["zh-cn"]=e["zh-cn"]||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"第 %0 步，共 %1 步","Align center":"居中对齐","Align left":"左对齐","Align right":"右对齐",Aquamarine:"海蓝色",Big:"大",Black:"黑色","Block quote":"块引用",Blue:"蓝色",Bold:"加粗","Bulleted List":"项目符号列表","Bulleted list styles toolbar":"项目符号列表样式工具条",Cancel:"取消","Cannot upload file:":"无法上传的文件：","Centered image":"图片居中","Change image text alternative":"更改图片替换文本","Choose heading":"标题类型",Circle:"空心圆点",Column:"列","Could not insert image at the current position.":"无法在当前位置插入图片","Could not obtain resized image URL.":"无法获取重设大小的图片URL",Decimal:"阿拉伯数字","Decimal with leading zero":"前导零阿拉伯数字","Decrease indent":"减少缩进",Default:"默认","Delete column":"删除本列","Delete row":"删除本行","Dim grey":"暗灰色",Disc:"实心圆点","Document colors":"文档中的颜色",Downloadable:"可下载","Dropdown toolbar":"下拉工具栏","Edit block":"编辑框","Edit link":"修改链接","Editor toolbar":"编辑器工具栏","Enter image caption":"输入图片标题","Font Background Color":"字体背景色","Font Color":"字体颜色","Font Family":"字体","Font Size":"字体大小","Full size image":"图片通栏显示",Green:"绿色",Grey:"灰色","Header column":"标题列","Header row":"标题行",Heading:"标题","Heading 1":"标题 1","Heading 2":"标题 2","Heading 3":"标题 3","Heading 4":"标题 4","Heading 5":"标题 5","Heading 6":"标题 6",Huge:"极大","Image toolbar":"图片工具栏","image widget":"图像小部件","Increase indent":"增加缩进","Insert column left":"左侧插入列","Insert column right":"右侧插入列","Insert image":"插入图像","Insert image or file":"插入图片或文件","Insert media":"插入媒体","Insert paragraph after block":"在后面插入段落","Insert paragraph before block":"在前面插入段落","Insert row above":"在上面插入一行","Insert row below":"在下面插入一行","Insert table":"插入表格","Inserting image failed":"插入图片失败",Italic:"倾斜",Justify:"两端对齐","Left aligned image":"图片左侧对齐","Light blue":"浅蓝色","Light green":"浅绿色","Light grey":"浅灰色",Link:"超链接","Link URL":"链接网址","Lower-latin":"小写拉丁字母","Lower–roman":"小写罗马数字","Media URL":"媒体URL","media widget":"媒体小部件","Merge cell down":"向下合并单元格","Merge cell left":"向左合并单元格","Merge cell right":"向右合并单元格","Merge cell up":"向上合并单元格","Merge cells":"合并单元格",Next:"下一步","Numbered List":"项目编号列表","Numbered list styles toolbar":"项目编号列表样式工具条","Open in a new tab":"在新标签页中打开","Open link in new tab":"在新标签页中打开链接",Orange:"橙色",Source:"源代码",Paragraph:"段落","Paste the media URL in the input.":"在输入中粘贴媒体URL",Previous:"上一步",Purple:"紫色",Red:"红色",Redo:"重做","Remove color":"移除颜色","Rich Text Editor":"富文本编辑器","Rich Text Editor, %0":"富文本编辑器， %0","Right aligned image":"图片右侧对齐",Row:"行",Save:"保存","Select all":"全选","Select column":"选择列","Select row":"选择行","Selecting resized image failed":"选择重设大小的图片失败","Show more items":"显示更多","Side image":"图片侧边显示",Small:"小","Split cell horizontally":"横向拆分单元格","Split cell vertically":"纵向拆分单元格",Square:"实心方块",Strikethrough:"删除线","Table toolbar":"表格工具栏","Text alignment":"对齐","Text alignment toolbar":"对齐工具栏","Text alternative":"替换文本","The URL must not be empty.":"URL不可以为空。","This link has no URL":"此链接没有设置网址","This media URL is not supported.":"不支持此媒体URL。",Tiny:"极小","Tip: Paste the URL into the content to embed faster.":"提示：将URL粘贴到内容中可更快地嵌入","Toggle the circle list style":"切换空心原点列表样式","Toggle the decimal list style":"切换阿拉伯数字列表样式","Toggle the decimal with leading zero list style":"切换前导零阿拉伯数字列表样式","Toggle the disc list style":"切换实心原点列表样式","Toggle the lower–latin list style":"切换小写拉丁字母列表样式","Toggle the lower–roman list style":"切换小写罗马数字列表样式","Toggle the square list style":"切换实心方块列表样式","Toggle the upper–latin list style":"切换大写拉丁字母列表样式","Toggle the upper–roman list style":"切换大写罗马数字列表样式",Turquoise:"青色",Underline:"下划线",Undo:"撤销",Unlink:"取消超链接","Upload failed":"上传失败","Upload in progress":"正在上传","Upper-latin":"大写拉丁字母","Upper-roman":"大写罗马数字",White:"白色","Widget toolbar":"小部件工具栏",Yellow:"黄色"}),t.getPluralForm=function(e){return 0}}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}))},"333d":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(e,t,n){var i=l(),a=e-i,c=20,u=0;t="undefined"===typeof t?500:t;var s=function e(){u+=c;var l=Math.easeInOutQuad(u,i,a,t);o(l),u<t?r(e):n&&"function"===typeof n&&n()};s()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&c(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},s=u,d=(n("e498"),n("2877")),p=Object(d["a"])(s,i,a,!1,null,"6af373ef",null);t["a"]=p.exports},"3c16":function(e,t,n){},"3e18":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("b775");function a(e){return Object(i["a"])({url:"/novel/article/list",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/novel/article/content",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/novel/article/save",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/novel/article/delete",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/novel/article/clear",method:"post",data:e})}},"435a":function(e,t,n){},"46bd":function(e,t,n){"use strict";n("3c16")},5638:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v(" 添加 ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"95"}}),n("el-table-column",{attrs:{label:"标题",prop:"title"}}),n("el-table-column",{attrs:{label:"所属章节",prop:"chapter_name",width:"80",align:"center"}}),n("el-table-column",{attrs:{label:"文章排序",prop:"sort",width:"80",align:"center"}}),n("el-table-column",{attrs:{"class-name":"status-col",label:"是否OSS",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:0===t.row.is_oss?"danger":"success"}},[e._v(e._s(t.row.is_oss_name))])]}}])}),n("el-table-column",{attrs:{label:"更新时间",prop:"updated_at",align:"center",width:"160"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v(" 编辑 ")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.handleDel(t.row)}}},[e._v(" 删除 ")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.getList}}),n("el-dialog",{attrs:{visible:e.dialogEdit,title:0===e.editObj.id?"添加章节":"编辑“"+e.editObj.title+"”",width:"800px",center:""},on:{"update:visible":function(t){e.dialogEdit=t}}},[n("el-form",{ref:"editObj",attrs:{rules:e.rules,model:e.editObj,"label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[n("el-input",{model:{value:e.editObj.title,callback:function(t){e.$set(e.editObj,"title",t)},expression:"editObj.title"}})],1),n("el-form-item",{attrs:{label:"所属章节",prop:"chapter_id"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.chapter_id,callback:function(t){e.$set(e.editObj,"chapter_id",t)},expression:"editObj.chapter_id"}},e._l(e.chapterPairs,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input",{model:{value:e.editObj.sort,callback:function(t){e.$set(e.editObj,"sort",t)},expression:"editObj.sort"}})],1),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("ck-editor",{ref:"editor",model:{value:e.editObj.content,callback:function(t){e.$set(e.editObj,"content",t)},expression:"editObj.content"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")]),n("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取消")])],1)],1)],1)},a=[],r=n("1da1"),o=(n("96cf"),n("d81d"),n("3e18")),l=n("333d"),c=n("e000"),u=n("5c97"),s={name:"List",components:{CkEditor:u["a"],Pagination:l["a"]},data:function(){return{list:null,total:0,listQuery:{page:1,size:20,bookId:this.$route.query.bookId},listLoading:!0,dialogEdit:!1,editObj:{},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],chapter_id:[{required:!0,message:"请选择章节",trigger:"blur"}],sort:[{required:!0,message:"排序不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]},chapterPairs:[]}},created:function(){this.getChapterPairs(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(o["d"])(this.listQuery).then((function(t){e.list=t.list,e.total=t.total,e.listLoading=!1,e.list.map((function(t){if(e.chapterPairs.length>0)for(var n in e.chapterPairs)e.chapterPairs[n]["value"]===t.chapter_id&&(t.chapter_name=e.chapterPairs[n]["label"])}))}))},getChapterPairs:function(){var e=this;Object(c["f"])(this.listQuery).then((function(t){e.chapterPairs=t.data}))},handleAdd:function(){this.initArticleObj(),this.dialogEdit=!0},handleEdit:function(e){var t=this;this.editObj=Object.assign({},e),Object(o["c"])({articleId:e.id}).then((function(e){0===e.code?(t.editObj.content=e.data,t.dialogEdit=!0,t.$nextTick((function(){t.$refs["editObj"].clearValidate()}))):t.$message.error(e.msg)}))},initArticleObj:function(){this.editObj={id:0,content:""}},handleSave:function(){var e=this;this.$refs.editObj.clearValidate(),this.$refs.editObj.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(o["e"])(e.editObj).then((function(t){0===t.code?(e.$message.success("保存成功"),e.dialogEdit=!1,e.getList()):e.$message.error(t.msg)}))}))},handleDel:function(e){var t=this;this.$confirm("确定删除小说章节“"+e.title+"”？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:Object(o["b"])({id:e.id}).then((function(e){0===e.code?(t.getList(),t.$message.success("删除成功")):t.$message.error(e.msg)}));case 1:case"end":return n.stop()}}),n)})))).catch((function(){}))}}},d=s,p=(n("a91d"),n("0ee0"),n("2877")),g=Object(p["a"])(d,i,a,!1,null,"6a1d8eca",null);t["default"]=g.exports},"5c97":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("div",{staticClass:"toolbar-container"}),n("div",{attrs:{id:"editor"}})])}];function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n("d3b7"),n("22cf");var c=n("91b6"),u=function(){function e(t){r(this,e),this.loader=t}return l(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(n,i){e.uploadFile(t,n)}))}))}},{key:"uploadFile",value:function(e,t){var n=new FormData;n.append("type","image"),n.append("file",e),Object(c["a"])("novel",n).then((function(e){t({default:e.data})}))}},{key:"abort",value:function(){}}]),e}(),s={name:"CkEditor",props:{value:{type:String,default:""}},data:function(){return{editor:null,first:!0,lastEditorData:""}},watch:{value:function(e,t){if(e!==t&&e!==this.lastEditorData)try{this.editor.setData(e)}catch(n){}}},mounted:function(){var e=this;window.ClassicEditor.create(document.querySelector("#editor"),{language:"zh-cn",fontFamily:{options:["默认字体, default","宋体, SimSun","黑体, SimHei","微软雅黑, Microsoft YaHei","微软正黑体, Microsoft JhengHei","新宋体, NSimSun","新细明体, PMingLiU","细明体, MingLiU","标楷体, DFKai-SB","仿宋, FangSong","楷体, KaiTi","仿宋_GB2312, FangSong_GB2312","楷体_GB2312, KaiTi_GB2312"]}}).then((function(t){var n=document.querySelector("main .toolbar-container");n.prepend(t.ui.view.toolbar.element),e.editor=t,t.plugins.get("FileRepository").createUploadAdapter=function(e){return new u(e)},t.model.document.on("change:data",(function(){var n=t.getData();e.lastEditorData=n,e.$emit("input",n),e.$emit("change",n)}))})).catch((function(e){console.error(e.stack)})).finally((function(){e.editor.setData(e.value)}))}},d=s,p=(n("46bd"),n("2877")),g=Object(p["a"])(d,i,a,!1,null,null,null);t["a"]=g.exports},"903f":function(e,t,n){},"91b6":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("b775");function a(e,t){return Object(i["a"])({url:"/upload",method:"post",params:{type:e},data:t})}},a91d:function(e,t,n){"use strict";n("435a")},a9e3:function(e,t,n){"use strict";var i=n("83ab"),a=n("da84"),r=n("94ca"),o=n("6eeb"),l=n("5135"),c=n("c6b6"),u=n("7156"),s=n("c04e"),d=n("d039"),p=n("7c73"),g=n("241c").f,f=n("06cf").f,m=n("9bf2").f,h=n("58a8").trim,b="Number",v=a[b],y=v.prototype,w=c(p(y))==b,O=function(e){var t,n,i,a,r,o,l,c,u=s(e,!1);if("string"==typeof u&&u.length>2)if(u=h(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+u}for(r=u.slice(2),o=r.length,l=0;l<o;l++)if(c=r.charCodeAt(l),c<48||c>a)return NaN;return parseInt(r,i)}return+u};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var j,k=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof k&&(w?d((function(){y.valueOf.call(n)})):c(n)!=b)?u(new v(O(t)),n,k):O(t)},S=i?g(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;S.length>T;T++)l(v,j=S[T])&&!l(k,j)&&m(k,j,f(v,j));k.prototype=y,y.constructor=k,o(a,b,k)}},e000:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return d}));var i=n("b775");function a(e){return Object(i["a"])({url:"/novel/book/list",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/novel/book/save",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/novel/book/delete",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/novel/book/chapterPairs",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/novel/book/changeCollect",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/novel/book/apply",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/novel/book/replyApply",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/novel/book/deleteApply",method:"post",data:e})}},e498:function(e,t,n){"use strict";n("1c18")}}]);