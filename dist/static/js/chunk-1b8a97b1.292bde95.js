(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b8a97b1"],{"0e71":function(e,t,i){},"1c18":function(e,t,i){},"2bf2":function(e,t,i){"use strict";i("4426")},"333d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];i("a9e3");Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,i){var a=r(),n=e-a,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var r=Math.easeInOutQuad(c,a,n,t);o(r),c<t?l(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(i("e498"),i("2877")),p=Object(d["a"])(u,a,n,!1,null,"6af373ef",null);t["a"]=p.exports},4426:function(e,t,i){},"550a":function(e,t,i){"use strict";i("0e71")},a434:function(e,t,i){"use strict";var a=i("23e7"),n=i("23cb"),l=i("a691"),o=i("50c4"),r=i("7b0b"),s=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var i,a,u,d,p,f,y=r(this),v=o(y.length),O=n(e,v),j=arguments.length;if(0===j?i=a=0:1===j?(i=0,a=v-O):(i=j-2,a=h(m(l(t),0),v-O)),v+i-a>b)throw TypeError(g);for(u=s(y,a),d=0;d<a;d++)p=O+d,p in y&&c(u,d,y[p]);if(u.length=a,i<a){for(d=O;d<v-a;d++)p=d+a,f=d+i,p in y?y[f]=y[p]:delete y[f];for(d=v;d>v-a+i;d--)delete y[d-1]}else if(i>a)for(d=v-a;d>O;d--)p=d+a-1,f=d+i-1,p in y?y[f]=y[p]:delete y[f];for(d=0;d<i;d++)y[d+O]=arguments[d+2];return y.length=v-a+i,u}})},ce6c:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[e._v(" 类型： "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.searchTypes,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(" 搜索 ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"95"}}),i("el-table-column",{attrs:{label:"封面",width:"70"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticStyle:{width:"50px"},attrs:{src:e.row.thumb_img,fit:"fill"}})]}}])}),i("el-table-column",{attrs:{label:"书名",prop:"name"}}),i("el-table-column",{attrs:{label:"作者",prop:"author",width:"150",align:"center"}}),i("el-table-column",{attrs:{label:"章节数",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticClass:"blue",attrs:{to:"/novel/book/article?bookId="+t.row.id}},[e._v(e._s(t.row.articlenum))])]}}])}),i("el-table-column",{attrs:{label:"浏览量",prop:"click",width:"80",align:"center"}}),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:0===t.row.is_finished?"danger":"success"}},[e._v(e._s(t.row.is_finished_name))])]}}])}),i("el-table-column",{attrs:{label:"采集ID",prop:"collect_id",width:"80",align:"center"}}),i("el-table-column",{attrs:{label:"来源ID",prop:"from_collect_book_id",width:"80",align:"center"}}),i("el-table-column",{attrs:{label:"质量",prop:"quality",width:"60",align:"center"}}),i("el-table-column",{attrs:{label:"采集时间",prop:"last_collect_at",align:"center",width:"160"}}),i("el-table-column",{attrs:{align:"center",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v(" 编辑 ")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.handleDel(t.row)}}},[e._v(" 删除 ")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.getList}}),i("el-dialog",{attrs:{visible:e.dialogEdit,title:(0===e.editObj.id?"添加":"编辑")+e.editObj.name,width:"700px",center:""},on:{"update:visible":function(t){e.dialogEdit=t}}},[i("el-form",{ref:"editObj",attrs:{rules:e.rules,model:e.editObj,"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"书名",prop:"name"}},[i("el-input",{model:{value:e.editObj.name,callback:function(t){e.$set(e.editObj,"name",t)},expression:"editObj.name"}})],1),i("el-form-item",{attrs:{label:"分类",prop:"category"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.category,callback:function(t){e.$set(e.editObj,"category",t)},expression:"editObj.category"}},e._l(e.categoryPairs,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"作者",prop:"author"}},[i("el-input",{model:{value:e.editObj.author,callback:function(t){e.$set(e.editObj,"author",t)},expression:"editObj.author"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"is_finished"}},[i("el-radio",{attrs:{label:0},model:{value:e.editObj.is_finished,callback:function(t){e.$set(e.editObj,"is_finished",t)},expression:"editObj.is_finished"}},[e._v("连载")]),i("el-radio",{attrs:{label:1},model:{value:e.editObj.is_finished,callback:function(t){e.$set(e.editObj,"is_finished",t)},expression:"editObj.is_finished"}},[e._v("完结")])],1),i("el-form-item",{attrs:{label:"简介",prop:"intro"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.editObj.intro,callback:function(t){e.$set(e.editObj,"intro",t)},expression:"editObj.intro"}})],1),i("el-form-item",{attrs:{label:"封面",prop:"thumb_img"}},[i("upload-file",{attrs:{"file-list-data":e.thumb_img,"project-type":"novel",limit:1},on:{"update:fileListData":function(t){e.thumb_img=t},"update:file-list-data":function(t){e.thumb_img=t}}})],1),i("el-form-item",{attrs:{label:"采集质量",prop:"quality"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.quality,callback:function(t){e.$set(e.editObj,"quality",t)},expression:"editObj.quality"}},e._l(5,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{label:"属性",prop:"is_recommend"}},[i("el-checkbox",{attrs:{"true-label":1},model:{value:e.editObj.is_recommend,callback:function(t){e.$set(e.editObj,"is_recommend",t)},expression:"editObj.is_recommend"}},[e._v("首页推荐")])],1),i("el-form-item",{attrs:{label:"采集监控",prop:"is_collect"}},[i("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},model:{value:e.editObj.is_collect,callback:function(t){e.$set(e.editObj,"is_collect",t)},expression:"editObj.is_collect"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")]),i("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取消")])],1)],1)],1)},n=[],l=i("1da1"),o=(i("96cf"),i("b0c0"),i("333d")),r=i("e000"),s=i("eac9"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.fileList,(function(t,a){return i("div",{key:a,staticClass:"image-preview"},["video"===e.uploadType?i("video",{attrs:{controls:"controls",src:t.url,height:"100%",width:"128px"}}):i("el-image",{attrs:{src:t.url,"preview-src-list":e.fileListData}}),i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delImage(a)}}})],1)})),e.fileListData.length<e.limit?i("el-upload",{ref:"uploadFile",staticStyle:{float:"left"},attrs:{action:e.url,"list-type":"picture-card",data:e.dataParams,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,"file-list":e.fileList,"on-change":e.handleChange,headers:e.headers,"show-file-list":!1,limit:e.limit,"on-exceed":e.handleExceed}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]):e._e()],2)},u=[],d=(i("a9e3"),i("a434"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("5f87")),p={name:"UploadFile",props:{width:{type:Number,default:100},uploadType:{type:String,default:"image"},projectType:{type:String,default:""},fileListData:{type:Array,default:function(){return[]}},limit:{type:Number,default:1}},data:function(){return{url:"/upload",dataParams:{type:this.uploadType},headers:{token:Object(d["a"])()},tmpFileList:this.fileListData}},computed:{fileList:{get:function(){var e=[];if(this.fileListData.length>0)for(var t in this.fileListData)e.push({name:"",url:this.fileListData[t]});return e}}},created:function(){this.url="https://api.joy.woodlsy.com/upload?type="+this.projectType},methods:{handleUploadSuccess:function(e,t,i){"undefined"===typeof e.code?(this.$message.error("上传失败"),this.$refs.uploadFile.uploadFiles.splice(this.$refs.uploadFile.uploadFiles.indexOf(e),1)):0!==e.code?(console.log(this.fileList,"!=0"),this.$message.error(e.msg),this.$refs.uploadFile.uploadFiles.splice(this.$refs.uploadFile.uploadFiles.indexOf(e),1)):(this.tmpFileList.push(e.data),this.$emit("update:fileListData",this.tmpFileList),this.tmpLimit=this.tmpLimit+1,this.imageUrl=URL.createObjectURL(t.raw)),console.log(t,"success"),console.log(i,"success")},handleUploadError:function(e,t,i){console.log(e,"error"),console.log(t,"error"),console.log(i,"error")},handleChange:function(e,t){},delImage:function(e){this.tmpFileList.splice(e,1),this.$emit("update:fileListData",this.tmpFileList),this.tmpLimit=this.tmpLimit-1},handleExceed:function(e,t){var i=this.limit-this.fileListData.length;this.$message.error("还能上传"+i+"个文件"),console.log(e,"handleExceed"),console.log(t,"handleExceed")}}},f=p,m=(i("550a"),i("2877")),h=Object(m["a"])(f,c,u,!1,null,"764fc289",null),b=h.exports,g={name:"List",components:{Pagination:o["a"],UploadFile:b},data:function(){return{list:null,total:0,listQuery:{page:1,size:10,type:"name",keyword:""},listLoading:!0,dialogEdit:!1,editObj:{},rules:{name:[{required:!0,message:"书名不能为空",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}]},thumb_img:[],categoryPairs:[],searchTypes:[{value:"name",label:"书名"},{value:"author",label:"作者"}]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(r["e"])(this.listQuery).then((function(t){e.list=t.list,e.total=t.total,e.listLoading=!1}))},handleSearch:function(){this.listQuery.page=1,this.getList()},handleEdit:function(e){var t=this;this.getCategoryPairs(),this.editObj=Object.assign({},e),this.thumb_img=[this.editObj.thumb_img],this.dialogEdit=!0,this.$nextTick((function(){t.$refs["editObj"].clearValidate()}))},getCategoryPairs:function(){var e=this;0===this.categoryPairs.length&&Object(s["c"])().then((function(t){0===t.code?e.categoryPairs=t.data:e.$message.error(t.msg)}))},handleSave:function(){var e=this;this.editObj.thumb_img=this.thumb_img[0]||"",this.$refs.editObj.clearValidate(),this.$refs.editObj.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(r["g"])(e.editObj).then((function(t){0===t.code?(e.$message.success("保存成功"),e.dialogEdit=!1,e.getList()):e.$message.error(t.msg)}))}))},handleDel:function(e){var t=this;this.$confirm("确定删除小说“"+e.name+"”？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:Object(r["b"])({id:e.id}).then((function(e){0===e.code?(t.getList(),t.$message.success("删除成功")):t.$message.error(e.msg)}));case 1:case"end":return i.stop()}}),i)})))).catch((function(){}))}}},y=g,v=(i("2bf2"),Object(m["a"])(y,a,n,!1,null,"7ab124c3",null));t["default"]=v.exports},e000:function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"g",(function(){return l})),i.d(t,"b",(function(){return o})),i.d(t,"f",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return c})),i.d(t,"h",(function(){return u})),i.d(t,"c",(function(){return d}));var a=i("b775");function n(e){return Object(a["a"])({url:"/novel/book/list",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/novel/book/save",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/novel/book/delete",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/novel/book/chapterPairs",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/novel/book/changeCollect",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/novel/book/apply",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/novel/book/replyApply",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/novel/book/deleteApply",method:"post",data:e})}},e498:function(e,t,i){"use strict";i("1c18")},eac9:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return r}));var a=i("b775");function n(e){return Object(a["a"])({url:"/novel/category/list",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/novel/category/save",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/novel/category/delete",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/novel/category/pairs",method:"get",params:e})}}}]);