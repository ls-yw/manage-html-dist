(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5536d244"],{"0e71":function(e,t,i){},"22cf":function(e,t){!function(e){var t=e["zh-cn"]=e["zh-cn"]||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"第 %0 步，共 %1 步","Align center":"居中对齐","Align left":"左对齐","Align right":"右对齐",Aquamarine:"海蓝色",Big:"大",Black:"黑色","Block quote":"块引用",Blue:"蓝色",Bold:"加粗","Bulleted List":"项目符号列表","Bulleted list styles toolbar":"项目符号列表样式工具条",Cancel:"取消","Cannot upload file:":"无法上传的文件：","Centered image":"图片居中","Change image text alternative":"更改图片替换文本","Choose heading":"标题类型",Circle:"空心圆点",Column:"列","Could not insert image at the current position.":"无法在当前位置插入图片","Could not obtain resized image URL.":"无法获取重设大小的图片URL",Decimal:"阿拉伯数字","Decimal with leading zero":"前导零阿拉伯数字","Decrease indent":"减少缩进",Default:"默认","Delete column":"删除本列","Delete row":"删除本行","Dim grey":"暗灰色",Disc:"实心圆点","Document colors":"文档中的颜色",Downloadable:"可下载","Dropdown toolbar":"下拉工具栏","Edit block":"编辑框","Edit link":"修改链接","Editor toolbar":"编辑器工具栏","Enter image caption":"输入图片标题","Font Background Color":"字体背景色","Font Color":"字体颜色","Font Family":"字体","Font Size":"字体大小","Full size image":"图片通栏显示",Green:"绿色",Grey:"灰色","Header column":"标题列","Header row":"标题行",Heading:"标题","Heading 1":"标题 1","Heading 2":"标题 2","Heading 3":"标题 3","Heading 4":"标题 4","Heading 5":"标题 5","Heading 6":"标题 6",Huge:"极大","Image toolbar":"图片工具栏","image widget":"图像小部件","Increase indent":"增加缩进","Insert column left":"左侧插入列","Insert column right":"右侧插入列","Insert image":"插入图像","Insert image or file":"插入图片或文件","Insert media":"插入媒体","Insert paragraph after block":"在后面插入段落","Insert paragraph before block":"在前面插入段落","Insert row above":"在上面插入一行","Insert row below":"在下面插入一行","Insert table":"插入表格","Inserting image failed":"插入图片失败",Italic:"倾斜",Justify:"两端对齐","Left aligned image":"图片左侧对齐","Light blue":"浅蓝色","Light green":"浅绿色","Light grey":"浅灰色",Link:"超链接","Link URL":"链接网址","Lower-latin":"小写拉丁字母","Lower–roman":"小写罗马数字","Media URL":"媒体URL","media widget":"媒体小部件","Merge cell down":"向下合并单元格","Merge cell left":"向左合并单元格","Merge cell right":"向右合并单元格","Merge cell up":"向上合并单元格","Merge cells":"合并单元格",Next:"下一步","Numbered List":"项目编号列表","Numbered list styles toolbar":"项目编号列表样式工具条","Open in a new tab":"在新标签页中打开","Open link in new tab":"在新标签页中打开链接",Orange:"橙色",Source:"源代码",Paragraph:"段落","Paste the media URL in the input.":"在输入中粘贴媒体URL",Previous:"上一步",Purple:"紫色",Red:"红色",Redo:"重做","Remove color":"移除颜色","Rich Text Editor":"富文本编辑器","Rich Text Editor, %0":"富文本编辑器， %0","Right aligned image":"图片右侧对齐",Row:"行",Save:"保存","Select all":"全选","Select column":"选择列","Select row":"选择行","Selecting resized image failed":"选择重设大小的图片失败","Show more items":"显示更多","Side image":"图片侧边显示",Small:"小","Split cell horizontally":"横向拆分单元格","Split cell vertically":"纵向拆分单元格",Square:"实心方块",Strikethrough:"删除线","Table toolbar":"表格工具栏","Text alignment":"对齐","Text alignment toolbar":"对齐工具栏","Text alternative":"替换文本","The URL must not be empty.":"URL不可以为空。","This link has no URL":"此链接没有设置网址","This media URL is not supported.":"不支持此媒体URL。",Tiny:"极小","Tip: Paste the URL into the content to embed faster.":"提示：将URL粘贴到内容中可更快地嵌入","Toggle the circle list style":"切换空心原点列表样式","Toggle the decimal list style":"切换阿拉伯数字列表样式","Toggle the decimal with leading zero list style":"切换前导零阿拉伯数字列表样式","Toggle the disc list style":"切换实心原点列表样式","Toggle the lower–latin list style":"切换小写拉丁字母列表样式","Toggle the lower–roman list style":"切换小写罗马数字列表样式","Toggle the square list style":"切换实心方块列表样式","Toggle the upper–latin list style":"切换大写拉丁字母列表样式","Toggle the upper–roman list style":"切换大写罗马数字列表样式",Turquoise:"青色",Underline:"下划线",Undo:"撤销",Unlink:"取消超链接","Upload failed":"上传失败","Upload in progress":"正在上传","Upper-latin":"大写拉丁字母","Upper-roman":"大写罗马数字",White:"白色","Widget toolbar":"小部件工具栏",Yellow:"黄色"}),t.getPluralForm=function(e){return 0}}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}))},"3c16":function(e,t,i){},"46bd":function(e,t,i){"use strict";i("3c16")},"550a":function(e,t,i){"use strict";i("0e71")},"5c97":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",[i("div",{staticClass:"toolbar-container"}),i("div",{attrs:{id:"editor"}})])}];function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i("d3b7"),i("22cf");var s=i("91b6"),c=function(){function e(t){r(this,e),this.loader=t}return l(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(i,n){e.uploadFile(t,i)}))}))}},{key:"uploadFile",value:function(e,t){var i=new FormData;i.append("type","image"),i.append("file",e),Object(s["a"])("novel",i).then((function(e){t({default:e.data})}))}},{key:"abort",value:function(){}}]),e}(),u={name:"CkEditor",props:{value:{type:String,default:""}},data:function(){return{editor:null,first:!0,lastEditorData:""}},watch:{value:function(e,t){if(e!==t&&e!==this.lastEditorData)try{this.editor.setData(e)}catch(i){}}},mounted:function(){var e=this;window.ClassicEditor.create(document.querySelector("#editor"),{language:"zh-cn",fontFamily:{options:["默认字体, default","宋体, SimSun","黑体, SimHei","微软雅黑, Microsoft YaHei","微软正黑体, Microsoft JhengHei","新宋体, NSimSun","新细明体, PMingLiU","细明体, MingLiU","标楷体, DFKai-SB","仿宋, FangSong","楷体, KaiTi","仿宋_GB2312, FangSong_GB2312","楷体_GB2312, KaiTi_GB2312"]}}).then((function(t){var i=document.querySelector("main .toolbar-container");i.prepend(t.ui.view.toolbar.element),e.editor=t,t.plugins.get("FileRepository").createUploadAdapter=function(e){return new c(e)},t.model.document.on("change:data",(function(){var i=t.getData();e.lastEditorData=i,e.$emit("input",i),e.$emit("change",i)}))})).catch((function(e){console.error(e.stack)})).finally((function(){e.editor.setData(e.value)}))}},d=u,f=(i("46bd"),i("2877")),g=Object(f["a"])(d,n,a,!1,null,null,null);t["a"]=g.exports},"5e4f":function(e,t,i){},"7dc6":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(0===e.id?"新增":"编辑")+"文章")]),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")])],1),i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.info,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{model:{value:e.info.title,callback:function(t){e.$set(e.info,"title",t)},expression:"info.title"}})],1),i("el-form-item",{attrs:{label:"分类",prop:"category_id"}},[i("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.info.category_id,callback:function(t){e.$set(e.info,"category_id",t)},expression:"info.category_id"}},e._l(e.categoryPairs,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"缩略图"}},[i("upload-file",{attrs:{"file-list-data":e.thumbImgArr,"project-type":"novel",limit:1},on:{"update:fileListData":function(t){e.thumbImgArr=t},"update:file-list-data":function(t){e.thumbImgArr=t}}})],1),i("el-form-item",{attrs:{label:"简介"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.info.desc,callback:function(t){e.$set(e.info,"desc",t)},expression:"info.desc"}})],1),i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("ck-editor",{ref:"editor",model:{value:e.info.content,callback:function(t){e.$set(e.info,"content",t)},expression:"info.content"}})],1),i("el-form-item",{attrs:{label:"标签"}},[e._l(e.tagsArr,(function(t,n){return i("el-tag",{key:n,staticClass:"tag",attrs:{"disable-transitions":!1,closable:""},on:{close:function(t){return e.handleCloseTag(n)}}},[e._v(e._s(t))])})),e.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.handlerAddTag}},[e._v("+ 新增标签")])],2),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{model:{value:e.info.sort,callback:function(t){e.$set(e.info,"sort",t)},expression:"info.sort"}})],1),i("el-form-item",{attrs:{label:"是否删除",prop:"sort"}},[i("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"删除","inactive-text":"正常","active-value":1,"inactive-value":0},model:{value:e.info.is_deleted,callback:function(t){e.$set(e.info,"is_deleted",t)},expression:"info.is_deleted"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),i("el-button",{on:{click:function(t){return e.$router.back()}}},[e._v("取消")])],1)],1)],1)],1)},a=[],r=(i("ac1f"),i("1276"),i("a434"),i("a15b"),i("d3b7"),i("a1fc")),o=i("8bc5"),l=i("b418"),s=i("5c97"),c={name:"ArticleEdit",components:{CkEditor:s["a"],UploadFile:l["a"]},data:function(){return{id:0,info:{},loading:!1,categoryPairs:[],inputVisible:!1,inputValue:"",tagsArr:[],thumbImgArr:[],rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],category_id:[{required:!0,message:"请选择分类",trigger:"change"}],content:[{required:!0,message:"请填写内容",trigger:"blur"}]}}},created:function(){this.$route.query.id&&(this.id=parseInt(this.$route.query.id),this.getInfo()),this.getPairs()},methods:{getInfo:function(){var e=this;Object(r["b"])({id:this.id}).then((function(t){e.info=t.data,e.thumbImgArr=""===e.info.img_url?[]:[e.info.img_url],""!==e.info.tags&&(e.tagsArr=e.info.tags.split(","))}))},getPairs:function(){var e=this;Object(o["c"])({pid:0}).then((function(t){e.categoryPairs=t.data,e.categoryPairs.unshift({label:"顶级分类",value:0})}))},handleCloseTag:function(e){this.tagsArr.splice(e,1)},handlerAddTag:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.tagsArr.push(e),this.inputVisible=!1,this.inputValue=""},onSubmit:function(){var e=this;console.log(this.info),this.info.img_url=this.thumbImgArr.length>0?this.thumbImgArr[0]:"",this.info.tags=this.tagsArr.length>0?this.tagsArr.join(","):"",this.$refs.form.clearValidate(),this.$refs.form.validate((function(t){t&&(e.loading=!0,Object(r["e"])(e.info).then((function(t){e.$message.success("保存成功"),e.$router.push("/blog/article/list")})).finally((function(){e.loading=!1})))}))}}},u=c,d=(i("93d6"),i("2877")),f=Object(d["a"])(u,n,a,!1,null,"09734124",null);t["default"]=f.exports},"8bc5":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"e",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return s}));var n=i("b775");function a(e){return Object(n["a"])({url:"/blog/category/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/blog/category/save",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/blog/category/delete",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/blog/category/recovery",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/blog/category/pairs",method:"get",params:e})}},"91b6":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("b775");function a(e,t){return Object(n["a"])({url:"/upload",method:"post",params:{type:e},data:t})}},"93d6":function(e,t,i){"use strict";i("5e4f")},a15b:function(e,t,i){"use strict";var n=i("23e7"),a=i("44ad"),r=i("fc6a"),o=i("a640"),l=[].join,s=a!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:s||!c},{join:function(e){return l.call(r(this),void 0===e?",":e)}})},a1fc:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return s}));var n=i("b775");function a(e){return Object(n["a"])({url:"/blog/article/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/blog/article/info",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/blog/article/save",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/blog/article/delete",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/blog/article/recovery",method:"post",data:e})}},a434:function(e,t,i){"use strict";var n=i("23e7"),a=i("23cb"),r=i("a691"),o=i("50c4"),l=i("7b0b"),s=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),f=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!g},{splice:function(e,t){var i,n,u,d,f,g,v=l(this),y=o(v.length),w=a(e,y),L=arguments.length;if(0===L?i=n=0:1===L?(i=0,n=y-w):(i=L-2,n=h(p(r(t),0),y-w)),y+i-n>m)throw TypeError(b);for(u=s(v,n),d=0;d<n;d++)f=w+d,f in v&&c(u,d,v[f]);if(u.length=n,i<n){for(d=w;d<y-n;d++)f=d+n,g=d+i,f in v?v[g]=v[f]:delete v[g];for(d=y;d>y-n+i;d--)delete v[d-1]}else if(i>n)for(d=y-n;d>w;d--)f=d+n-1,g=d+i-1,f in v?v[g]=v[f]:delete v[g];for(d=0;d<i;d++)v[d+w]=arguments[d+2];return v.length=y-n+i,u}})},b418:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.fileList,(function(t,n){return i("div",{key:n,staticClass:"image-preview"},["video"===e.uploadType?i("video",{attrs:{controls:"controls",src:t.url,height:"100%",width:"128px"}}):i("el-image",{attrs:{src:t.url,"preview-src-list":e.fileListData}}),i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delImage(n)}}})],1)})),e.fileListData.length<e.limit?i("el-upload",{ref:"uploadFile",staticStyle:{float:"left"},attrs:{action:e.url,"list-type":"picture-card",data:e.dataParams,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,"file-list":e.fileList,"on-change":e.handleChange,headers:e.headers,"show-file-list":!1,limit:e.limit,"on-exceed":e.handleExceed}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]):e._e()],2)},a=[],r=(i("a9e3"),i("a434"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("5f87")),o={name:"UploadFile",props:{width:{type:Number,default:100},uploadType:{type:String,default:"image"},projectType:{type:String,default:""},fileListData:{type:Array,default:function(){return[]}},limit:{type:Number,default:1}},data:function(){return{url:"/upload",dataParams:{type:this.uploadType},headers:{token:Object(r["a"])()},tmpFileList:this.fileListData}},computed:{fileList:{get:function(){var e=[];if(this.fileListData.length>0)for(var t in this.fileListData)e.push({name:"",url:this.fileListData[t]});return e}}},created:function(){this.url="https://api.joy.woodlsy.com/upload?type="+this.projectType},methods:{handleUploadSuccess:function(e,t,i){"undefined"===typeof e.code?(this.$message.error("上传失败"),this.$refs.uploadFile.uploadFiles.splice(this.$refs.uploadFile.uploadFiles.indexOf(e),1)):0!==e.code?(console.log(this.fileList,"!=0"),this.$message.error(e.msg),this.$refs.uploadFile.uploadFiles.splice(this.$refs.uploadFile.uploadFiles.indexOf(e),1)):(this.tmpFileList.push(e.data),this.$emit("update:fileListData",this.tmpFileList),this.tmpLimit=this.tmpLimit+1,this.imageUrl=URL.createObjectURL(t.raw)),console.log(t,"success"),console.log(i,"success")},handleUploadError:function(e,t,i){console.log(e,"error"),console.log(t,"error"),console.log(i,"error")},handleChange:function(e,t){},delImage:function(e){this.tmpFileList.splice(e,1),this.$emit("update:fileListData",this.tmpFileList),this.tmpLimit=this.tmpLimit-1},handleExceed:function(e,t){var i=this.limit-this.fileListData.length;this.$message.error("还能上传"+i+"个文件"),console.log(e,"handleExceed"),console.log(t,"handleExceed")}}},l=o,s=(i("550a"),i("2877")),c=Object(s["a"])(l,n,a,!1,null,"764fc289",null);t["a"]=c.exports}}]);